<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/neon-animation/neon-animation.html">
<link rel="import" href="profile-dialog.html">
<link rel="import" href="chat-content.html">

<dom-module id="chat-page">
  <style>
  </style>
  <template>
    <neon-animated-pages id="contents" selected="[[page]]" attr-for-selected="name">
      <chat-content name="chat" username="{{username}}" password="{{password}}" on-profile-open="handleProfileOpen"></chat-content>
      <profile-dialog name="profile" id="profile" profile="{{profile}}" on-close="handleDialogClose"></profile-dialog>
    </neon-animated-pages>
  </template>
</dom-module>

<script>
  // register a new element called sidebar-element
  Polymer({
    is: "chat-page",

    behaviors: [
      Polymer.NeonSharedElementAnimatableBehavior
    ],

    properties: {
      page:{
        type:String,
        value:"chat"
      }
    },

    handleDialogClose: function(e){
      this.$.contents.selected = "chat"
    },
    handleProfileOpen: function(e){
      this.set('profile', e.detail)
      this.$.contents.selected = "profile"
    },

    ready: function() {
      if (!auth.loggedIn()){
        document.querySelector('app-router').go('/login')
      }
    }

  });

</script>